(window.webpackJsonp=window.webpackJsonp||[]).push([["minesweeper"],{"2FCs":function(e,t,i){},"3lrY":function(e,t,i){"use strict";i.r(t);var n=i("oCYn"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"minesweeper"},[e.gameStatus!==e.GAME_STATUS_PLAYING?i("form",{on:{submit:e.formSubmit}},[e.errors.length?i("div",[e._m(0),e._v(" "),i("ul",e._l(e.errors,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),i("label",{attrs:{for:"x-input"}},[e._v("X:")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.x,expression:"x",modifiers:{number:!0}}],attrs:{type:"number",required:"required",id:"x-input"},domProps:{value:e.x},on:{input:function(t){t.target.composing||(e.x=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),i("label",{attrs:{for:"y-input"}},[e._v("Y:")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.y,expression:"y",modifiers:{number:!0}}],attrs:{type:"number",required:"required",id:"y-input"},domProps:{value:e.y},on:{input:function(t){t.target.composing||(e.y=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),i("label",{attrs:{for:"bombsPercentage-input"}},[e._v("Bombs "+e._s(e.bombsPercentage)+"%:")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.bombsPercentage,expression:"bombsPercentage"}],attrs:{type:"range",min:"1",max:"100",required:"required",id:"bombsPercentage-input"},domProps:{value:e.bombsPercentage},on:{__r:function(t){e.bombsPercentage=t.target.value}}}),e._v(" "),i("input",{attrs:{type:"submit",value:"Generate"}})]):e._e(),e._v(" "),this.game.length?i("table",[i("tbody",e._l(e.y,(function(t){return i("tr",e._l(e.x,(function(n){return i("td",{class:{hidden:e.game[(t-1)*e.x+(n-1)].hidden},style:e.itemStyles(e.game[(t-1)*e.x+(n-1)]),on:{click:function(i){e.itemClick(e.game[(t-1)*e.x+(n-1)])},contextmenu:function(i){i.preventDefault(),e.itemRMBClick(e.game[(t-1)*e.x+(n-1)])}}},[e.game[(t-1)*e.x+(n-1)].hidden?i("i",{class:{"fa fa-flag":1===e.game[(t-1)*e.x+(n-1)].hiddenState,"fa fa-question":2===e.game[(t-1)*e.x+(n-1)].hiddenState}}):e.game[(t-1)*e.x+(n-1)].bomb?i("i",{staticClass:"fa fa-bomb"}):e.game[(t-1)*e.x+(n-1)].siblingBombs?i("span",[e._v(e._s(e.game[(t-1)*e.x+(n-1)].siblingBombs))]):e._e()])})),0)})),0)]):e._e()])};s._withStripped=!0;i("QWBl"),i("eoL8"),i("FZtP");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.index=t,this.hidden=!0,this.bomb=!1,this.siblingBombs=0,this.hiddenState=0}var t,i,n;return t=e,(i=[{key:"upHiddenState",value:function(){this.hiddenState++,this.hiddenState>2&&(this.hiddenState=0)}},{key:"canClick",value:function(){return this.hidden&&1!==this.hiddenState}},{key:"canRMBClick",value:function(){return this.hidden}}])&&r(t.prototype,i),n&&r(t,n),e}(),o={name:"minesweeper",data:function(){return{GAME_STATUS_PLAYING:1,GAME_STATUS_NOT_PLAYING:2,GAME_STATUS_LOST:3,GAME_STATUS_WIN:4,gameStatus:2,game:[],bombIndexes:[],errors:[],x:20,y:20,bombsPercentage:20}},computed:{itemsCount:function(){return this.game.length}},methods:{formSubmit:function(e){return e.preventDefault(),this.errors=[],this.x&&this.y&&this.generateGame(),this.x||this.errors.push("Type X size"),this.y||this.errors.push("Type Y size"),!1},generateGame:function(){this.gameStatus=this.GAME_STATUS_PLAYING,this.initializeBoard()},initializeBoard:function(){this.game=[],this.bombIndexes=[];for(var e=0;e<this.x;e++)for(var t=0;t<this.y;t++)this.game.push(new a(e*this.x+t));for(var i=Math.floor(this.bombsPercentage*this.itemsCount/100);i>0;){var n=Math.floor(Math.random()*this.itemsCount);this.game[n].bomb||(this.bombIndexes.push(n),this.game[n].bomb=!0,i--)}for(var s=0;s<this.bombIndexes.length;s++){this.getSiblingsForIndex(this.bombIndexes[s]).forEach((function(e){e.bomb||e.siblingBombs++}))}},getSiblingsForIndex:function(e){var t=[],i=e,n=e%this.x>0,s=e%this.x<this.x-1;return(i-=1)>=0&&n&&t.push(this.game[i]),(i=e-this.x)>=0&&t.push(this.game[i]),(i-=1)>=0&&n&&t.push(this.game[i]),(i+=2)>=0&&s&&t.push(this.game[i]),(i=e+1)<this.itemsCount&&s&&t.push(this.game[i]),(i=e+this.x)<this.itemsCount&&t.push(this.game[i]),(i=e+this.x-1)<this.itemsCount&&n&&t.push(this.game[i]),(i=e+this.x+1)<this.itemsCount&&s&&t.push(this.game[i]),t},itemClick:function(e){this.gameStatus===this.GAME_STATUS_PLAYING&&e.canClick()&&(e.hidden=!1,e.bomb?this.exploded():0===e.siblingBombs&&(console.log(e),this.revealSiblings(e.index)))},itemRMBClick:function(e){this.gameStatus===this.GAME_STATUS_PLAYING&&e.canRMBClick()&&e.upHiddenState()},itemStyles:function(e){var t={};if(!e.hidden&&!e.bomb)switch(e.siblingBombs){case 1:t.color="blue";break;case 2:t.color="green";break;case 3:t.color="red";break;case 4:t.color="purple";break;case 5:t.color="black";break;case 6:t.color="maroon";break;case 7:t.color="gray";break;case 8:t.color="turquoise"}return this.gameStatus===this.GAME_STATUS_LOST&&e.bomb&&(t.backgroundColor="red"),t},exploded:function(){this.gameStatus=this.GAME_STATUS_LOST,this.game.forEach((function(e){e.hidden=!1}))},revealSiblings:function(e){for(var t=this.getSiblingsForIndex(e),i=0;i<t.length;i++)t[i].hidden&&(t[i].hidden=!1,0===t[i].siblingBombs&&this.revealSiblings(t[i].index))}}},u=(i("GC0A"),i("KHd+")),m=Object(u.a)(o,s,[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("b",[this._v("Please correct the following error(s):")])])}],!1,null,null,null);m.options.__file="assets/modules/minesweeper/minesweeper.vue";var h=m.exports;i("fxB9");i("fxB9"),new n.a({el:"#app",template:"<div><minesweeper/></div>",components:{minesweeper:h}})},GC0A:function(e,t,i){"use strict";var n=i("2FCs");i.n(n).a},eoL8:function(e,t,i){var n=i("I+eb"),s=i("g6v/");n({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:i("m/L8").f})}},[["3lrY","runtime",0,1]]]);